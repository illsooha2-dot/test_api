<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>수야 REST 자동 트레이딩 대시보드 (모의)</title>
  <link rel="stylesheet" href="./style.css?v=layout3" />
</head>
<body>
  <header class="topbar">
    <h1>수야의 자동 트레이딩 (Mock REST)</h1>
    <div class="actions">
      <button id="btnHealth">서버 상태</button>
      <button id="btnToken">토큰 발급</button>
      <span id="health" class="muted"></span>
    </div>
  </header>
  <main class="layout">
    <aside class="panel left">
      <h2>조건식 목록</h2>
      <div class="list" id="condAll"></div>
      <div class="row">
        <button id="btnAddToDesk">→ 교실에 추가</button>
        <button id="btnSaveConds">저장</button>
      </div>
    </aside>
    <section class="panel center">
      <div class="header-row"><h2>나만의 교실</h2></div>
      <div id="desk" class="desk grid"></div>
    </section>
    <aside class="panel right">
      <div class="tabs">
        <button class="tab active" data-tab="strategy">자동 매매 전략</button>
        <button class="tab" data-tab="account">계좌 선택</button>
        <button class="tab" data-tab="manual">수동 주문</button>
        <button class="tab" data-tab="telegram">텔레그램</button>
      </div>
      <div class="tabbody" id="tab-strategy">
        <label class="row"><input type="checkbox" id="autoEnabled"> 자동 매매 활성화</label>
        <label>종목당 주문 금액 <input type="number" id="orderAmount" min="0" step="1000" value="100000"> 원</label>
        <label>최대 매수 종목수 <input type="number" id="maxItems" min="1" max="100" value="10"></label>
        <fieldset>
          <legend><label><input type="checkbox" id="sellEnabled"> 매도 전략 선택</label></legend>
          <div class="radio-group">
            <label><input type="radio" name="sell" value="fixed_stop" checked> 고정 손익절</label>
            <label><input type="radio" name="sell" value="trailing_stop"> 트레일링 스탑</label>
            <label><input type="radio" name="sell" value="moving_average"> 이동평균선(데드크로스)</label>
          </div>
          <div id="fixedBox" class="box">
            <label>익절 목표(%) <input type="number" id="targetProfit" step="0.1" value="5.0"></label>
            <label>손절 한도(%) <input type="number" id="stopLoss" step="0.1" value="-3.0"></label>
          </div>
          <div id="trailBox" class="box hidden">
            <label>트레일링 시작(%) <input type="number" id="trailStart" step="0.1" value="3.0"></label>
            <label>트레일링 하락폭(%) <input type="number" id="trailFall" step="0.1" value="-1.0"></label>
            <label>기본 손절률(%) <input type="number" id="trailBase" step="0.1" value="-3.0"></label>
          </div>
          <div id="maBox" class="box hidden">
            <label>차트 기간
              <select id="maUnit"><option>일봉</option><option>분봉</option></select>
              <input type="number" id="maInterval" min="1" max="60" value="5" disabled>
            </label>
            <label>단기 <input type="number" id="maShort" min="1" max="100" value="5"></label>
            <label>장기 <input type="number" id="maLong" min="1" max="200" value="20"></label>
          </div>
        </fieldset>
        <button id="btnSaveGeneral">전략 저장</button>
      </div>
      <div class="tabbody hidden" id="tab-account">
        <button id="btnBalance">계좌 잔고 확인</button>
        <div class="kv">
          <div><span>총 예수금</span><b id="labDeposit">-</b></div>
          <div><span>주문가능</span><b id="labAvail">-</b></div>
          <div><span>오늘 실현 손익</span><b id="labToday">-</b></div>
          <div><span>총 매입금액</span><b id="labPurchase">-</b></div>
          <div><span>총 평가금액</span><b id="labEval">-</b></div>
          <div><span>총 평가손익</span><b id="labPL">-</b></div>
          <div><span>총 수익률</span><b id="labReturn">-</b></div>
        </div>
      </div>
      <div class="tabbody hidden" id="tab-manual">
        <h3>수동 매수</h3>
        <div class="row">
          <input id="manBuyCode" placeholder="종목코드(6자리)">
          <input id="manBuyQty" type="number" min="1" value="1">
          <select id="manBuyMarket"><option value="true" selected>시장가</option><option value="false">지정가</option></select>
          <input id="manBuyPrice" type="number" min="0" value="0">
          <button id="manBuyBtn">시장가 매수</button>
        </div>
        <h3>수동 매도</h3>
        <div class="row">
          <input id="manSellCode" placeholder="종목코드(6자리)">
          <input id="manSellQty" type="number" min="1" value="1">
          <select id="manSellMarket"><option value="true" selected>시장가</option><option value="false">지정가</option></select>
          <input id="manSellPrice" type="number" min="0" value="0">
          <button id="manSellBtn">시장가 매도</button>
        </div>
      </div>
      <div class="tabbody hidden" id="tab-telegram">
        <label class="row"><input type="checkbox" id="tgEnabled"> 텔레그램 알림 활성화</label>
        <label>API 토큰 <input id="tgToken" placeholder="봇 토큰"></label>
        <label>채팅 ID <input id="tgChat" placeholder="채팅 ID"></label>
        <button id="btnSaveTg">저장</button>
      </div>
    </aside>
  </main>
  <section class="panel bottom">
    <div class="split">
      <div>
        <h2>실시간 포착 및 거래 기록</h2>
        <pre id="log"></pre>
      </div>
      <div>
        <h2>자동 매매 기록</h2>
        <h3>매수 기록</h3>
        <table id="tblBuy"><thead><tr><th>종목명</th><th>금액</th><th>수량</th><th>시간</th></tr></thead><tbody></tbody></table>
        <h3>매도 기록</h3>
        <table id="tblSell"><thead><tr><th>종목명</th><th>금액</th><th>수익률(%)</th><th>시간</th></tr></thead><tbody></tbody></table>
      </div>
    </div>
  </section>
  <script src="./app.js?v=acct9"></script>
</body>
</html>
